[
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "",
  "modified": "2025-05-07 18:48:49.947828",
  "name": "Low Stock Items",
  "private": 0,
  "roles": [],
  "script": "frappe.call({\r\n    method: \"medical_erp.desk_data.desk_data.get_stock_data\",\r\n    callback: function(r) {\r\n        console.log(r)\r\n        if (r.message && r.message.length > 0) {\r\n            let data = r.message;\r\n            let html = `\r\n                <style>\r\n                    .stock-table {\r\n                        width: 100%;\r\n                        border-collapse: collapse;\r\n                        margin-bottom: 20px;\r\n                    }\r\n                    .stock-table th, .stock-table td {\r\n                        border: 1px solid #ccc;\r\n                        padding: 8px 12px;\r\n                        text-align: left;\r\n                    }\r\n                    .stock-table th {\r\n                        background-color: #f5f5f5;\r\n                        font-weight: bold;\r\n                    }\r\n                    .stock-table tr:nth-child(even) {\r\n                        background-color: #f9f9f9;\r\n                    }\r\n                </style>\r\n                <table class=\"stock-table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Item Code</th>\r\n                            <th>Stock Quantity</th>\r\n                            <th>UOM</th>\r\n                            <th>Reorder Level</th>\r\n                            <th>Warehouse</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n            `;\r\n            data.forEach(item => {\r\n                html += `\r\n                    <tr>\r\n                        <td>${item.item_code}</td>\r\n                        <td>${item.stock_qty || 0}</td>\r\n                        <td>${item.stock_uom || 'Unit'}</td>\r\n                        <td>${item.re_order_level}</td>\r\n                        <td>${item.warehouse}</td>\r\n                    </tr>\r\n                `;\r\n            });\r\n            html += `\r\n                    </tbody>\r\n                </table>\r\n            `;\r\n            root_element.innerHTML = html;\r\n        } else {\r\n            root_element.innerHTML = \"<p>No low stock items found.</p>\";\r\n        }\r\n    }\r\n});\r\n",
  "style": null
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": null,
  "modified": "2025-05-07 21:30:16.600407",
  "name": "Today's Report",
  "private": 0,
  "roles": [],
  "script": "frappe.call({\r\n    method: \"medical_erp.desk_data.desk_data.get_todays_report\",\r\n    callback: function(r) {\r\n        if (r.message) {\r\n            let data = r.message;\r\n            let html = `\r\n                <div style=\"border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; background-color: #ffffff; box-shadow: 0 2px 4px rgba(0,0,0,0.1);\">\r\n                    <h4 style=\"margin-top: 0; margin-bottom: 16px; color: #333; border-bottom: 1px solid #eee; padding-bottom: 8px;\">Today's Report</h4>\r\n                    <div style=\"display: grid; grid-template-columns: 1fr 1fr; gap: 12px;\">\r\n                        <div>\r\n                            <p style=\"margin: 0 0 4px 0; font-size: 0.9rem; color: #666;\">Total Orders</p>\r\n                            <p style=\"margin: 0; font-size: 1.3rem; font-weight: 500; color: #2e7d32;\">${data.total_orders}</p>\r\n                        </div>\r\n                        <div>\r\n                            <p style=\"margin: 0 0 4px 0; font-size: 0.9rem; color: #666;\">Total Sales</p>\r\n                            <p style=\"margin: 0; font-size: 1.3rem; font-weight: 500; color: #1565c0;\">₹${data.total_sales}</p>\r\n                        </div>\r\n                        <div>\r\n                            <p style=\"margin: 0 0 4px 0; font-size: 0.9rem; color: #666;\">Gross Profit</p>\r\n                            <p style=\"margin: 0; font-size: 1.3rem; font-weight: 500; color: #7b1fa2;\">₹${data.gross_profit}</p>\r\n                        </div>\r\n                        <div>\r\n                            <p style=\"margin: 0 0 4px 0; font-size: 0.9rem; color: #666;\">Net Profit</p>\r\n                            <p style=\"margin: 0; font-size: 1.3rem; font-weight: 500; color: #d84315;\">₹${data.net_profit}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            `;\r\n            root_element.innerHTML = html;\r\n        } else {\r\n            root_element.innerHTML = `<div style=\"border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; background-color: #f5f5f5; color: #616161; text-align: center;\">No data available for today</div>`;\r\n        }\r\n    }\r\n});",
  "style": ""
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "",
  "modified": "2025-05-07 22:30:55.624016",
  "name": "Near Expiry/Expired Medicines",
  "private": 0,
  "roles": [],
  "script": "frappe.call({\r\n    method: \"medical_erp.desk_data.desk_data.get_near_expiry_data\",\r\n    callback: function (r) {\r\n        if (r.message && r.message.length > 0) {\r\n            let data = r.message;\r\n\r\n            let html = `\r\n                <style>\r\n                    .expiry-table {\r\n                        width: 100%;\r\n                        border-collapse: collapse;\r\n                        font-family: \"Inter\", sans-serif;\r\n                        font-size: 14px;\r\n                        margin-top: 20px;\r\n                    }\r\n                    .expiry-table thead {\r\n                        background-color: #f8f9fa;\r\n                        font-weight: bold;\r\n                    }\r\n                    .expiry-table th, .expiry-table td {\r\n                        border: 1px solid #dee2e6;\r\n                        padding: 8px 12px;\r\n                        text-align: center;\r\n                    }\r\n                    .expiry-table tbody tr:hover {\r\n                        background-color: #f1f3f5;\r\n                    }\r\n                    .expiry-status-expired {\r\n                        color: #e03131;\r\n                        font-weight: bold;\r\n                    }\r\n                    .expiry-status-near {\r\n                        color: #fab005;\r\n                        font-weight: bold;\r\n                    }\r\n                </style>\r\n\r\n                <table class=\"expiry-table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Item Code</th>\r\n                            <th>Item Name</th>\r\n                            <th>Batch No</th>\r\n                            <th>Expiry Date</th>\r\n                            <th>Batch Qty</th>\r\n                            <th>UOM</th>\r\n                            <th>SGST</th>\r\n                            <th>CGST</th>\r\n                            <th>Total</th>\r\n                            <th>Status</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n            `;\r\n\r\n            data.forEach(item => {\r\n                const statusClass = item.status === \"Expired\" ? \"expiry-status-expired\" : \"expiry-status-near\";\r\n                html += `\r\n                    <tr>\r\n                        <td>${item.item_code || ''}</td>\r\n                        <td>${item.item_name || ''}</td>\r\n                        <td>${item.batch_id || ''}</td>\r\n                        <td>${item.expiry_date || 'N/A'}</td>\r\n                        <td>${item.batch_qty || 0}</td>\r\n                        <td>${item.stock_uom || 'Unit'}</td>\r\n                        <td>${item.sgst_amount ? item.sgst_amount.toFixed(2) : '0.00'}</td>\r\n                        <td>${item.cgst_amount ? item.cgst_amount.toFixed(2) : '0.00'}</td>\r\n                        <td>${item.total ? item.total.toFixed(2) : '0.00'}</td>\r\n                        <td class=\"${statusClass}\">${item.status}</td>\r\n                    </tr>\r\n                `;\r\n            });\r\n\r\n            html += `\r\n                    </tbody>\r\n                </table>\r\n            `;\r\n\r\n            root_element.innerHTML = html;\r\n        } else {\r\n            root_element.innerHTML = \"<p style='margin-top:16px;font-family:Inter,sans-serif;'>No near expiry or expired batches found.</p>\";\r\n        }\r\n    }\r\n});",
  "style": null
 }
]